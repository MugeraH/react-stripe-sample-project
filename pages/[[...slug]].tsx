import React from "react";
import type { NextPage } from "next";
import Head from "next/head";
import { useRouter } from "next/router";
import {
  Box,
  AppBar,
  Typography,
  Toolbar,
  IconButton,
  Card,
  Button,
  Paper,
  Container,
  Grid,
} from "@mui/material";
import Main from "../Components/layout/Main";
import Store from "../Components/layout/Store";
import Cancel from "../Components/layout/Cancel";
import Success from "../Components/layout/Success";
import Navbar from "../Components/layoutComponents/Navbar";
import BasicModal from "../Components/layoutComponents/Modal";

const Home: NextPage = () => {
  const router = useRouter();
  const [openCart, setOpenCart] = React.useState(false);
  const [cartCount, setCartCount] = React.useState<number>(0);

  let { slug } = router.query;
  let page = "";
  // @ts-ignore
  if (slug) {
    page = slug[0];
  }
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Navbar cartCount={cartCount}  setOpenPopUp={setOpenCart} />

      <BasicModal
        title="Shopping cart"
        openPopup={openCart}
        setOpenPopUp={() => setOpenCart(!openCart)}
      >
        <Typography>This is the moday body</Typography>
      </BasicModal>

      <Container sx={{ background: "#f1f1f1" }}>
        {page == "store" ? (
          <Store />
        ) : (page == "cancel") === true ? (
          <Cancel />
        ) : (page == "success") === true ? (
          <Success />
        ) : (
          <Store />
        )}
      </Container>
    </>
  );
};

export default Home;
